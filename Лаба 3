from abc import ABC, abstractmethod
import math

class Shape(ABC):
    @abstractmethod
    def area(self):
        pass

    @abstractmethod
    def perimeter(self):
        pass

class Circle(Shape):
    def __init__(self, radius):
        self.radius = radius

    def area(self):
        return math.pi * self.radius ** 2

    def perimeter(self):
        return 2 * math.pi * self.radius

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height

    def area(self):
        return self.width * self.height

    def perimeter(self):
        return 2 * (self.width + self.height)

class Triangle(Shape):
    def __init__(self, side1, side2, side3):
        self.side1 = side1
        self.side2 = side2
        self.side3 = side3

    def area(self):
        s = self.perimeter() / 2
        return math.sqrt(s * (s - self.side1) * (s - self.side2) * (s - self.side3))

    def perimeter(self):
        return self.side1 + self.side2 + self.side3

def main():
    print("=== –ó–ê–î–ê–ù–ò–ï 2: –ö–õ–ê–°–° '–§–ò–ì–£–†–ê' ===")
    
    shapes = []
    
    while True:
        print("\n--- –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π —Ñ–∏–≥—É—Ä—ã ---")
        print("1 - –ö—Ä—É–≥")
        print("2 - –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫") 
        print("3 - –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫")
        
        choice = input("–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ñ–∏–≥—É—Ä—ã (1-3): ")
        
        if choice == '1':
            radius = float(input("–í–≤–µ–¥–∏—Ç–µ —Ä–∞–¥–∏—É—Å –∫—Ä—É–≥–∞: "))
            shape = Circle(radius)
        elif choice == '2':
            width = float(input("–í–≤–µ–¥–∏—Ç–µ —à–∏—Ä–∏–Ω—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞: "))
            height = float(input("–í–≤–µ–¥–∏—Ç–µ –≤—ã—Å–æ—Ç—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞: "))
            shape = Rectangle(width, height)
        elif choice == '3':
            side1 = float(input("–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: "))
            side2 = float(input("–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä—É—é —Å—Ç–æ—Ä–æ–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: "))
            side3 = float(input("–í–≤–µ–¥–∏—Ç–µ —Ç—Ä–µ—Ç—å—é —Å—Ç–æ—Ä–æ–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: "))
            shape = Triangle(side1, side2, side3)
        else:
            print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!")
            continue
        
        shapes.append(shape)
        print(f"\n‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ–∏–≥—É—Ä–∞: {type(shape).__name__}")
        print(f"üìè –ü–ª–æ—â–∞–¥—å: {shape.area():.2f}")
        print(f"üìê –ü–µ—Ä–∏–º–µ—Ç—Ä: {shape.perimeter():.2f}")
        
        again = input("\n–°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–Ω—É —Ñ–∏–≥—É—Ä—É? (–¥–∞/–Ω–µ—Ç): ").lower()
        if again != '–¥–∞':
            break
    
    print(f"\n=== –ò–¢–û–ì–û: —Å–æ–∑–¥–∞–Ω–æ {len(shapes)} —Ñ–∏–≥—É—Ä ===")
    for i, shape in enumerate(shapes, 1):
        print(f"{i}. {type(shape).__name__}: –ü–ª–æ—â–∞–¥—å = {shape.area():.2f}, –ü–µ—Ä–∏–º–µ—Ç—Ä = {shape.perimeter():.2f}")

if __name__ == "__main__":
    main()
