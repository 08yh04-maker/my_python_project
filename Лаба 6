from flask import Flask

app = Flask(__name__)

@app.route("/")
def hello():
    return "Привет Flask!"

if __name__ == "__main__":
    app.run(debug=True)



from flask import Flask, render_template, request

app = Flask(__name__)

@app.route("/")
def index():
    return render_template('index.html')

@app.route("/greet", methods=['POST'])
def greet():
    name = request.form.get('name', 'Гость')
    return f"Привет, {name}!"

if __name__ == "__main__":
    app.run(debug=True)


<!DOCTYPE html>
<html>
<head>
    <title>Форма приветствия</title>
</head>
<body>
    <h1>Введите ваше имя</h1>
    <form action="/greet" method="post">
        <input type="text" name="name" placeholder="Ваше имя" required>
        <button type="submit">Приветствовать</button>
    </form>
</body>
</html>


from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    price: float

@app.get("/")
def read_root():
    return {"message": "Привет FastAPI!"}

@app.get("/user/{user_id}")
def read_user(user_id: int):
    return {"user_id": user_id, "message": f"Привет пользователь {user_id}!"}

@app.post("/items/")
def create_item(item: Item):
    return {"item_name": item.name, "item_price": item.price}

import sqlite3
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from contextlib import contextmanager

app = FastAPI()

# Модель данных
class User(BaseModel):
    id: int = None
    name: str
    email: str

# Контекстный менеджер для работы с БД
@contextmanager
def get_db():
    conn = sqlite3.connect('users.db')
    conn.row_factory = sqlite3.Row
    try:
        yield conn
    finally:
        conn.close()

# Инициализация БД
def init_db():
    with get_db() as conn:
        conn.execute('''
            CREATE TABLE IF NOT EXISTS users (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                email TEXT NOT NULL UNIQUE
            )
        ''')
        conn.commit()

@app.on_event("startup")
def startup():
    init_db()

@app.get("/")
def read_root():
    return {"message": "FastAPI с SQLite базой данных"}

@app.get("/users/")
def get_users():
    with get_db() as conn:
        users = conn.execute('SELECT * FROM users').fetchall()
        return [dict(user) for user in users]

@app.get("/users/{user_id}")
def get_user(user_id: int):
    with get_db() as conn:
        user = conn.execute('SELECT * FROM users WHERE id = ?', (user_id,)).fetchone()
        if user is None:
            raise HTTPException(status_code=404, detail="Пользователь не найден")
        return dict(user)

@app.post("/users/")
def create_user(user: User):
    with get_db() as conn:
        try:
            cursor = conn.execute(
                'INSERT INTO users (name, email) VALUES (?, ?)',
                (user.name, user.email)
            )
            conn.commit()
            user.id = cursor.lastrowid
            return user
        except sqlite3.IntegrityError:
            raise HTTPException(status_code=400, detail="Email уже существует")

@app.put("/users/{user_id}")
def update_user(user_id: int, user: User):
    with get_db() as conn:
        conn.execute(
            'UPDATE users SET name = ?, email = ? WHERE id = ?',
            (user.name, user.email, user_id)
        )
        conn.commit()
        return {"message": "Пользователь обновлен"}

@app.delete("/users/{user_id}")
def delete_user(user_id: int):
    with get_db() as conn:
        conn.execute('DELETE FROM users WHERE id = ?', (user_id,))
        conn.commit()
        return {"message": "Пользователь удален"}
